{"version":3,"file":"static/js/235.26a187ec.chunk.js","mappings":"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","sources":["components/modals/PromptModal.tsx","pages/Settings.tsx"],"sourcesContent":["import {FC} from \"react\";\r\n\r\ninterface PromptModalProps {\r\n  actions: () => JSX.Element;\r\n  text: string;\r\n  title: string;\r\n  setShowPromptModal: (value: boolean) => void;\r\n}\r\n\r\nexport const PromptModal: FC<PromptModalProps> = ({\r\n  actions,\r\n  text,\r\n  title,\r\n  setShowPromptModal,\r\n}) => {\r\n  return (\r\n    <div\r\n      className=\"fixed bg-white/65 dark:bg-black/65 left-0 top-0 h-dvh w-screen flex flex-col items-center justify-center\"\r\n      onClick={(e) => setShowPromptModal(false)}\r\n    >\r\n      <div\r\n        className=\"h-fit w-11/12 sm:w-1/3 gap-2 min-w-3.5 flex flex-col justify-between text-black dark:text-white bg-zinc-100 dark:bg-zinc-900 p-5 rounded-md\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <h2>{title}</h2>\r\n\r\n        <p className=\"text-sm mb-2\">{text}</p>\r\n        {actions()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import {deleteUser, signOut} from \"firebase/auth\";\r\nimport Navigation from \"../navigation\";\r\nimport {auth, db} from \"../services/firebaseConfig\";\r\nimport {Link, useLocation, useNavigate} from \"react-router-dom\";\r\nimport {BsFillPersonFill} from \"react-icons/bs\";\r\nimport {useNotifications} from \"reapop\";\r\nimport useAuth from \"../hooks/useAuth\";\r\nimport {FC, useState} from \"react\";\r\nimport {\r\n  IoInformationCircleSharp,\r\n  IoLogOut,\r\n  IoRemoveSharp,\r\n} from \"react-icons/io5\";\r\nimport {BsPersonLinesFill} from \"react-icons/bs\";\r\nimport {appConfig} from \"../appConfig\";\r\nimport {PromptModal} from \"../components/modals/PromptModal\";\r\nimport Loading from \"../components/Loading\";\r\nimport {deleteDoc, doc} from \"firebase/firestore\";\r\n\r\ninterface OptionItemProps {\r\n  icon: any;\r\n  name: string;\r\n  navigate: string;\r\n  admin: boolean;\r\n}\r\n\r\nconst userIsAdmin = true;\r\nconst iconSize = 20;\r\nconst OptionItem: FC<OptionItemProps> = ({icon, name, navigate, admin}) => {\r\n  if (admin && !userIsAdmin) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <Link to={navigate}>\r\n      <div className=\"flex w-full rounded-md p-2 pr-1 pl-3 gap-4 items-center text-zinc-700 dark:text-zinc-200 hover:opacity-90 transition-opacity\">\r\n        {icon}\r\n        <div>{name}</div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nconst SettingsOptions: OptionItemProps[] = [\r\n  {\r\n    icon: <IoInformationCircleSharp size={iconSize} />,\r\n    name: \"Informacje\",\r\n    navigate: \"/Information\",\r\n    admin: false,\r\n  },\r\n];\r\n\r\nconst logOutOption = {\r\n  icon: <IoLogOut size={iconSize} />,\r\n  name: \"Wyloguj mnie\",\r\n  navigate: \"./\",\r\n  admin: false,\r\n};\r\n\r\nconst RemoveAccountOption = {\r\n  icon: <IoRemoveSharp size={iconSize} />,\r\n  name: \"Usuń konto\",\r\n  navigate: \"./\",\r\n  admin: false,\r\n};\r\n\r\nconst Settings = () => {\r\n  const navigate = useNavigate();\r\n  const {notify} = useNotifications();\r\n  const {user}: any = useAuth();\r\n  const location = useLocation();\r\n  const [showPromptModal, setShowPromptModal] = useState(false);\r\n\r\n  const logOut = async () => {\r\n    await signOut(auth);\r\n    navigate(\"/\");\r\n    notify({\r\n      status: \"success\",\r\n      title: \"Zostałeś wylogowany\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-3 h-screen max-h-dvh justify-between w-full bg-white dark:bg-black\">\r\n      <div className=\"flex-col flex items-center justify-center w-full gap-2 mt-10\">\r\n        <div className=\"rounded-full p-8 bg-zinc-200 dark:bg-zinc-950 border-[5px] border-zinc-400 dark:border-zinc-800\">\r\n          <BsFillPersonFill size={40} color=\"white\" />\r\n        </div>\r\n        <h2 className=\"dark:text-white font-semibold\">{user?.nick}</h2>\r\n      </div>\r\n      <div className=\"flex flex-col items-center justify-between w-full pr-4 pl-4 pt-10 flex-grow overflow-auto h-0\">\r\n        <div className=\"flex flex-col gap-2 w-full pl-3 pr-3 overflow-auto h-full\">\r\n          <Link to={\"/EditUserModal\"} state={{previousLocation: location}}>\r\n            <div className=\"flex w-full rounded-md p-2 pr-1 pl-3 gap-4 items-center text-zinc-700 dark:text-zinc-200 hover:opacity-90 transition-opacity\">\r\n              <BsPersonLinesFill size={iconSize} />\r\n              <div>Edytuj profil</div>\r\n            </div>\r\n          </Link>\r\n          {SettingsOptions.map((data, id) => (\r\n            <OptionItem {...data} key={id} />\r\n          ))}\r\n          <div onClick={logOut}>\r\n            <OptionItem {...logOutOption} />\r\n          </div>\r\n          <div onClick={() => setShowPromptModal(true)}>\r\n            <OptionItem {...RemoveAccountOption} />\r\n          </div>\r\n        </div>\r\n        <Link to={\"/ReleaseNotes\"}>\r\n          <div className=\"bg-transparent w-full text-green-600/85 text-center text-sm py-2 px-4 hover:border-transparent rounded\">\r\n            ScheduleWork v{appConfig.version} - for Prato Verde\r\n          </div>\r\n        </Link>\r\n      </div>\r\n\r\n      {showPromptModal && (\r\n        <PromptModal\r\n          text=\"Czy na pewno chcesz usunąć swoje konto? wszyystkie dane zostaną usunięte.\"\r\n          title=\"Zatwierdź\"\r\n          setShowPromptModal={setShowPromptModal}\r\n          actions={() => (\r\n            <RemoveAccountActions setShowPromptModal={setShowPromptModal} />\r\n          )}\r\n        />\r\n      )}\r\n      <Navigation type=\"Settings\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n\r\nconst RemoveAccountActions: FC<{\r\n  setShowPromptModal: (value: boolean) => void;\r\n}> = ({setShowPromptModal}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const {notify} = useNotifications();\r\n  const {user}: any = useAuth();\r\n\r\n  const tryRemoveAccount = () => {\r\n    setLoading(true);\r\n    removeAccount(notify, user.uid);\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-3\">\r\n      <button\r\n        className=\"button bg-zinc-700-600 text-white font-bold hover:opacity-80 transition-opacity p-1.5 rounded-md text-sm\"\r\n        onClick={() => setShowPromptModal(false)}\r\n      >\r\n        Wyjdź\r\n      </button>\r\n      <button\r\n        className=\"button bg-red-600 text-white pl-3 pr-3 font-bold hover:opacity-80 transition-opacity p-1.5 rounded-md text-sm\"\r\n        onClick={tryRemoveAccount}\r\n      >\r\n        Usuń konto\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst removeAccount = (notify: any, userUid: string) => {\r\n  let user = auth.currentUser;\r\n\r\n  if (user) {\r\n    deleteUser(user)\r\n      .then(() => {\r\n        notify({\r\n          status: \"success\",\r\n          title: \"Udało się usunąć konto!\",\r\n        });\r\n      })\r\n      .then(async () => {\r\n        try {\r\n          await deleteDoc(doc(db, \"users\", userUid));\r\n          notify({\r\n            status: \"success\",\r\n            title: \"Udało się usunąć dane konta!\",\r\n          });\r\n        } catch (error) {\r\n          notify({\r\n            status: \"error\",\r\n            title: \"Coś poszło nie tak!\",\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if ((error.code = \"auth/requires-recent-login\")) {\r\n          notify({\r\n            status: \"error\",\r\n            title: \"Aby usunąć konto, zaloguj się ponownie!\",\r\n          });\r\n        } else {\r\n          notify({\r\n            status: \"error\",\r\n            title: \"Coś poszło nie tak, spróbuj ponownie później\",\r\n          });\r\n        }\r\n      });\r\n  }\r\n};\r\n"],"names":["PromptModal","_ref","actions","text","title","setShowPromptModal","_jsx","className","onClick","e","children","_jsxs","stopPropagation","OptionItem","icon","name","navigate","admin","Link","to","SettingsOptions","IoInformationCircleSharp","size","logOutOption","IoLogOut","RemoveAccountOption","IoRemoveSharp","useNavigate","notify","useNotifications","user","useAuth","location","useLocation","_useState","useState","_useState2","_slicedToArray","showPromptModal","logOut","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","signOut","auth","status","stop","apply","arguments","BsFillPersonFill","color","nick","state","previousLocation","BsPersonLinesFill","map","data","id","_createElement","_objectSpread","key","appConfig","version","RemoveAccountActions","Navigation","type","_ref3","_useState3","_useState4","loading","setLoading","Loading","removeAccount","uid","userUid","currentUser","deleteUser","then","_callee2","_context2","deleteDoc","doc","db","t0","catch","error","code"],"sourceRoot":""}